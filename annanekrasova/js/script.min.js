"use strict";document.addEventListener("DOMContentLoaded",(function(){(()=>{let e,t,o,c,n,s=[],a=0;const r=()=>{const e=t.createImageData(o,c),n=new Uint32Array(e.data.buffer),a=n.length;for(let e=0;e<a;e++)Math.random()<.5&&(n[e]=4278190080);s.push(e)},l=()=>{9===a?a=0:a++,t.putImageData(s[a],0,0),n=window.setTimeout(()=>{window.requestAnimationFrame(l)},40)},i=()=>{o=window.innerWidth,c=window.innerHeight*window.devicePixelRatio/1,e.width=o,e.height=c;for(let e=0;e<10;e++)r();l()};e=document.getElementById("noise"),t=e.getContext("2d"),i()})();const e=document.querySelectorAll('a[href^="#"]');for(let t of e)t.addEventListener("click",(function(e){e.preventDefault();const o=t.hasAttribute("href")?t.getAttribute("href"):"body";document.querySelector(o).scrollIntoView({behavior:"smooth",block:"start"})}));const t=document.querySelector(".header__burger"),o=document.querySelector(".header__menu"),c=document.querySelectorAll(".header__menu-item");t.addEventListener("click",(function(){t.classList.contains("active")?(t.classList.remove("active"),o.classList.remove("active")):(t.classList.add("active"),o.classList.add("active"))})),c.forEach(e=>{e.addEventListener("click",(function(){t.classList.remove("active"),o.classList.remove("active")}))});const n=document.querySelector(".overlay"),s=document.querySelectorAll('a[href^="#modal"]'),a=document.querySelectorAll(".modal__close"),r=document.querySelector("body"),l=document.getElementById("request"),i=document.getElementById("thanks");s.forEach(e=>{e.addEventListener("click",(function(){r.style.overflow="hidden",n.classList.add("active"),l.classList.add("active"),i.classList.remove("active")}))}),a.forEach(e=>{e.addEventListener("click",(function(){r.style.overflow="auto",n.classList.remove("active"),l.classList.remove("active"),i.classList.remove("active")}))});const d=document.getElementById("form");function u(e){e.parentElement.classList.add("_error"),e.classList.add("_error")}function m(e){e.parentElement.classList.remove("_error"),e.classList.remove("_error")}function v(e){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)}d.addEventListener("submit",(async function(e){console.log("Отправка запроса"),e.preventDefault();let t=function(e){let t=0,o=document.querySelectorAll("._req");const c=document.querySelectorAll(".warn");for(let e=0;e<o.length;e++){const n=o[e],s=c[e];m(n),s.style.display="none",n.classList.contains("_email")?v(n)&&(u(n),s.style.display="block",t++):("checkbox"===n.getAttribute("type")&&!1===n.checked||""===n.value)&&(u(n),s.style.display="block",t++)}return t}(),o=new FormData(d);if(0===t){let e=await fetch("sendmail.php",{method:"POST",body:o});if(e.ok){let t=await e.json();console.log(t.result),d.reset(),l.classList.remove("active"),i.classList.add("active")}else console.log("Ошибка отправки формы")}}))}));